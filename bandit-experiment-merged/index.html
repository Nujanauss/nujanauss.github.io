<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid World Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="/bandit/favicon.ico">
</head>
<body>

    <!-- INDEX -->
    <div id="INDEX" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="padding-50 font-30">Welcome!</div>
            <div class="index-instructions">In this study, we are investigating people's decision making. We hope you enjoy participating.</div>
            <div class="index-instructions">The study will take about 10 minutes. You will be directed back to Prolific at the end.</div>
            <div class="index-instructions">Click Next to continue.</div>
          </aside>
          <div id="first-next">
            <button id="first-next" class="button enabled">Next</button>
          </div>
        </div>
    </div>

    <!-- PRECONSENT -->
    <div id="PRECONSENT" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="padding-50 font-30">Before we begin</div>
            <div class="index-instructions blue-coloured">Do not refresh this tab at any point, or you will no longer be able to access the experiment.</div>
            <div class="index-instructions">Click Next to enter fullscreen mode and proceed to the consent pages.</div>
            <button id="second-next" class="button enabled">Next</button>
          </aside>
        </div>
    </div>

    <!-- CONSENT -->
    <div id="CONSENT" class="w">
        <div class="consent-wrapper">
            <h2 id="consent-first-sentence" class="consent">Informed Consent Form for online experiments on cognitive control</h2>
            <div class="consent">This is a psychology experiment being conducted by Dr. Peter Dayan, director of the Max Planck Institute for Biological Cybernetics, and the members of his lab. In order to consent to participate, you MUST meet the following criteria:</div>
            <div class="consent">
              <ul>
                <li>18 years of age or older.</li>
                <li>Fluent speaker of English.</li>
                <li>Have not previously participated in this experiment.</li>
              </ul>
            </div>
            <div class="consent">This study is designed to look at how people learn how to make decisions to accomplish their goals. In this task, you will be asked to make choices, play games, and answer questions related to those games. The study will take about 10 minutes and will pay £1.75 plus a performance-dependent bonus of up to a maximum of £2. The performance bonus is explained in more detail in the instructions that follow.</div>
            <div class="consent">Your participation in this research is voluntary. You may refrain from answering any questions that make you uncomfortable and may withdraw your participation at any time without penalty by exiting this task and alerting the experimenter. You may choose not to complete certain parts of the task or answer certain questions. You may contact us at the address provided below if you have additional questions or concerns.</div>
            <div class="consent">Other than monetary compensation, participating in this study will provide no direct benefits to you. But we hope that this research will benefit society at large by contributing towards establishing a scientific foundation for improving people’s learning and cognitive control abilities.</div>
            <div class="consent">Your online username may be connected to your individual responses, but we will not be asking for any additional personally identifying information, and we will handle responses as confidentially as possible. We cannot however guarantee the confidentiality of information transmitted over the Internet. We will be keeping deidentified data collected as part of this experiment indefinitely. Data used in scientific publications will remain completely anonymous.</div>
            <div class="consent">If you have any questions about the study, feel free to contact our lab. Dr. Dayan and his lab members can be reached at <a href="mailto:kyblab.tuebingen@gmail.com">kyblab.tuebingen@gmail.com</a>.</div>
            <div class="consent">By selecting the “consent” option below, I acknowledge that I am 18 or older, that I am a fluent speaker of English, that I have read this consent form, and that I agree to take part in the research.</div>
            <div id="consent-buttons-wrapper" class="consent button-group">
              <button id="consent-given" class="button small-button enabled">I consent to participate</button>
              <button id="consent-rescinded" class="button small-button enabled">I do not consent to participate</button>
            </div>
        </div>
    </div>

    <!-- DATA-PROTECTION -->
    <div id="DATA-PROTECTION" class="w">
        <div class="consent-wrapper">
            <h2 id="consent-first-sentence" class="consent">Data Protection Form for online experiments on cognitive control</h2>
            <div class="consent">Please click <a href="./static/data-protection-form.pdf">here</a> to view our Data Protection Information Sheet. It is yours to keep.</div>
            <div class="consent">I have received and taken note of the Data Protection Information Sheet for this study. In doing so, I had sufficient time and opportunity to ask questions about data protection and reconsider my participation in the study. I am aware that:</div>
            <div class="consent">
              <ul>
                <li>The processing and use of the collected data occurs in a pseudoanonymised form within the scope of the legally prescribed provisions. As a general rule, the storage occurs in the form of answered questionnaires, as well as electronic data, for a duration of 10 years or longer, if this is required by the purpose of the study.</li>
                <li>By providing further personal data in pseudoanonymised form, collected personal data may be used for the preparation of anonymised scientific research work and may also be published and used in an anonymised form in medical journals and scientific publications, so that a direct assignment to my person cannot be established.</li>
                <li>The information obtained during the course of this study may also be sent in an anonymised form to cooperation partners within the scope of the European General Data Protection Regulation for scientific purposes and to cooperation partners outside of the European Union, i.e. to countries with a lower data protection level (this also applies to the USA).</li>
                <li>The data collected within the scope of the study can also be used and processed in the future inside of the Max Planck Institute.</li>
              </ul>
            </div>
            <div class="consent">I was informed about my rights. In particular, that at any time:</div>
            <div class="consent">
                <ul>
                  <li>I can withdraw this declaration of consent.</li>
                  <li>I can request information about my stored data and request the correction or blocking of data.</li>
                  <li>If I choose to stop participating in this study, I can request that any of my personal data associated with this study are immediately deleted or anonymised.</li>
                  <li>I can request that my personal data are handed out to me or to third parties (if technically feasible).</li>
                </ul>
            </div>
            <div class="consent">I hereby declare that:</div>
            <div class="consent">
                <ul>
                  <li>I have been adequately informed about the collection and processing of my personal data and rights.</li>
                  <li>I consent to the collection and processing of personal data within the scope of the study and its pseudoanonymised disclosure, so that only persons conducting the study can establish a link between the data and my person.</li>
                </ul>
            </div>
            <div class="consent">Your online username may be connected to your individual responses, but we will not be asking for any additional personally identifying information, and we will handle responses as confidentially as possible.</div>
            <div class="consent">We cannot however guarantee the confidentiality of information transmitted over the internet. We will keep deidentified data collected as part of this experiment indefinitely. Data used in scientific publications will remain completely anonymous.</div>
            <div class="consent consent-checkboxes">
                <input type="checkbox" id="checkbox-y">
                <label for="checkbox-y" class="checkbox-label">I agree to participate in this experiment.</label>
            </div>
            <div class="consent consent-checkboxes">
                <input type="checkbox" id="checkbox-z">
                <label for="checkbox-z" class="checkbox-label">I consent to the use of my data described in the Data Protection Information Sheet and confirm having received a copy of the Data Protection Sheet.</label>
            </div>
            <div class="consent consent-checkboxes">
                <input type="checkbox" id="checkbox-x">
                <label for="checkbox-x" class="checkbox-label">I consent to data transfer from the MPI for Biological Cybernetics encrypted database to the project-related collaborators: inside of the Max Planck Society and affiliated research institutes, or at partnering institutions like the University of Tuebingen and New York University.</label>
            </div>
            <div id="consent-buttons-wrapper" class="consent button-group">
                <button id="submit-button" class="button small-button disabled" disabled>Submit</button>
                <button id="data-consent-rescinded" class="button small-button enabled">I do not consent to all of the above</button>
            </div>
        </div>
    </div>

    <!-- INSTRUCTIONS1 -->
    <div id="INSTRUCTIONS1" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="progress-bar-container">
              <div class="progress-bar" id="page1"></div>
            </div>
            <div class="index-instructions">You are about to be presented with several cards.</div>
            <div class="index-instructions">You can click on these cards individually. When you click on a card it <span id="binary-dependent">may</span> reward you.</div>
            <div class="index-instructions"><span class="blue-coloured">Your task is to maximise your score by selecting the right cards.</span></div>
            <button id="nextButton1" class="button enabled">Next</button>
          </aside>
        </div>
    </div>

    <!-- INSTRUCTIONS2 -->
    <div id="INSTRUCTIONS2" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="progress-bar-container">
              <div class="progress-bar" id="page2"></div>
            </div>
            <div class="index-instructions">We call selecting a card a trial.</div>
            <div id="one" class="index-instructions">You can only make a set number of trials in each round. Once you run out of trials, the round is over.</div>
            <div id="two" class="index-instructions"><span class="blue-coloured">The chance that a card will reward you will not change throughout the entire game.</span></div>
            <div class="button-group">
              <button id="backButton2" class="move-screen-button button enabled">Back</button>
              <button id="nextButton2" class="move-screen-button button enabled">Next</button>
            </div>
          </aside>
        </div>
    </div>

    <!-- INSTRUCTIONS3 -->
    <div id="INSTRUCTIONS3" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="progress-bar-container">
              <div class="progress-bar" id="page3"></div>
            </div>
            <div class="index-instructions">You will begin the task with a bonus of £0.</div>
            <div class="index-instructions">The more points you score, the higher your bonus will become.</div>
            <div class="index-instructions"><span class="blue-coloured">We will add up all the points you get in all the rounds to calculate your final bonus.</span></div>
            <div class="button-group">
                <button id="backButton3" class="move-screen-button button enabled">Back</button>
                <button id="nextButton3" class="move-screen-button button enabled">Next</button>
            </div>
          </aside>
        </div>
    </div>

    <!-- INSTRUCTIONS4 -->
    <div id="INSTRUCTIONS4" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="progress-bar-container">
              <div class="progress-bar" id="page4"></div>
            </div>
            <div class="index-instructions">To give you an idea of how the cards will look, let's have a training round.</div>
            <div class="index-instructions">During the training round, all the cards will give you a reward of 0. Click on any of the cards 8 times. These can be the same cards, or different cards.</div>
            <div class="index-instructions">When you're ready, click Train to continue.</div>
            <div class="button-group">
                <button id="backButton4" class="move-screen-button button enabled">Back</button>
                <button id="trainingButton" class="move-screen-button button enabled">Train</button>
            </div>
          </aside>
        </div>
    </div>

    <!-- TRAIN -->
    <div id="TRAIN" class="w">
        <div class="wrapper">
            <div class="grid-info-wrapper">
              <aside class="filler"></aside>
              <div id="grid-container-training"></div>
              <aside class="info">
                <div class="box box-placed">
                  <div id="score-training">Score: 0</div>
                  <div id="moves-training">Trials left: 8</div>
                </div>
                <div id="trainingOver" class="dark-grey-coloured">
                  Click on any of the cards 8 times.
                </div>
                <button id="trainingOverBut" class="button enabled gone">Next</button>
              </aside>
            </div>
        </div>
    </div>

    <!-- PREBEGIN1 -->
    <div id="PREBEGIN1" class="w">
        <div class="wrapper">
            <aside class="inter">
              <div class="progress-bar-container">
                <div class="progress-bar" id="page-prebegin1"></div>
              </div>
              <div id="real-thing" class="index-instructions">Now let's move onto the real thing.</div>
              <div class="index-instructions">First, let's give you a username. Click generate to create a username:</div>
              <div id="username-generation" class="index-instructions blue-coloured hidden">lumi7el</div>
              <button id="prebegin1" class="button enabled">Generate</button>
            </aside>
          </div>
    </div>

    <!-- PREBEGIN2 -->
    <div id="PREBEGIN2" class="w">
        <div class="wrapper">
            <aside class="inter">
              <div class="progress-bar-container">
                <div class="progress-bar" id="page-prebegin2"></div>
              </div>
              <div class="index-instructions">Great! Your username is lumi7el.</div>
              <div id="comparison-text" class="index-instructions"></div>
              <div class="index-instructions hide-on-comparison">Let's find that player. Click Search:</div>
              <div class="loader hide-on-comparison"></div>
              <div id="comparer" class="index-instructions blue-coloured hidden hide-on-comparison"><span id="comparer-name">Player 1</span> played <span id="clock">3:14.12</span> ago.</div>
              <div id="play-command" class="index-instructions hidden">Now it's time to get started with the real game. We'll have a quick check to make sure you understand everything, and then we're ready to Play!</div>
              <button id="prebegin2" class="button enabled">Search</button>
            </aside>
          </div>
    </div>

    <!-- CHECK -->
    <div id="CHECK" class="w">
        <div class="wrapper">
            <aside class="check-inter">
              <div class="padding-50 font-30">Checking test</div>
              <div class="check">
                  <div id="1" class="question">When I click on a card, it will always reward me.</div>
                  <div class="answers">
                      <label>True <input type="radio" name="question-1" value="true"></label>
                      <label> False <input type="radio" name="question-1" value="false"></label>
                  </div>
              </div>
              <div class="check">
                  <div id="2" class="question">How much I receive from a card may change after each trial.</div>
                  <div class="answers">
                      <label>True <input type="radio" name="question-2" value="true"></label>
                      <label> False <input type="radio" name="question-2" value="false"></label>
                  </div>
              </div>
              <div class="check">
                  <div id="3" class="question">I must maximise my score on the final round to get the highest bonus.</div>
                  <div class="answers">
                      <label>True <input type="radio" name="question-3" value="true"></label>
                      <label> False <input type="radio" name="question-3" value="false"></label>
                  </div>
              </div>
              <div class="check">
                  <div id="3a" class="question">My bonus depends on the scores of others.</div>
                  <div class="answers">
                      <label>True <input type="radio" name="question-3a" value="true"></label>
                      <label> False <input type="radio" name="question-3a" value="false"></label>
                  </div>
              </div>
              <div id="final-check" class="check">
                  <div id="4" class="question">n3ssiori played with exactly the same cards as me.</div>
                  <div class="answers">
                      <label>True <input type="radio" name="question-4" value="true"></label>
                      <label> False <input type="radio" name="question-4" value="false"></label>
                  </div>
              </div>
            </aside>
            <div id="correct" class="index-instructions gone">Perfect! When you're ready to play, click Play.</div>
            <button id="check-next" class="button">Check</button>
            <div id="error-msg" class="error hidden">There was a mistake. Please correct the highlighted question.</div>
          </div>
    </div>

    <!-- GAME -->
    <div id="GAME" class="w">
        <div class="wrapper">
            <div class="grid-info-wrapper">
              <div id="overlay"></div>
              <div id="comparison-information" class="gone">
                  <div class="comparison-box-text">
                    <p id="comparison-box-first-line" class="margin-bottom-10">In the last <span id="no-comparison-trials">2 trials,</span></p>
                    <p class="score-container">
                      <span class="align-left">You scored: </span>
                      <span class="spacer"></span>
                      <span id="player-score-since-last-comparison" class="align-right">100</span>
                    </p>
                    <p id="comparer-score-container" class="score-container">
                      <span class="align-left">n3ssiori scored: </span>
                      <span class="spacer"></span>
                      <span id="comparison-score-since-last-comparison" class="align-right">100</span>
                    </p>
                  </div>
                  <div id="read-comparison" class="hidden font-15">Press anywhere in the box to continue.</div>
              </div>
              <aside class="filler"></aside>
              <div id="grid-container"></div>
              <aside class="info">
                <div id="box" class="box">
                  <div id="score">Score: 0</div>
                  <div id="moves">Trials left: 50</div>
                </div>
                <div class="gone dark-grey-coloured" id="trialOver">Round over. Click Next to continue.</div>
                <button id="trialOverBut" class="button enabled gone">Next</button>
              </aside>
            </div>
        </div>
    </div>

    <!-- INTERMEDIARY -->
    <div id="INTERMEDIARY" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div id="scorer" class="padding-30">You scored: 10</div>
            <button id="rounder" class="button enabled">Next round</button>
          </aside>
        </div>
    </div>
    
    <!-- STANDINGS -->
    <div id="STANDINGS" class="w">
        <div class="wrapper">
            <aside class="inter">
              <div class="padding-50 font-30">Highest scores</div>
              <div class="chart-container">
                  <svg id="barChart" width="400" height="300"></svg>
              </div>
              <button id="next-round-button" class="button" disabled>Next Round</button>
            </aside>
        </div>
    </div>
    
    <!-- THANKS -->
    <div id="THANKS" class="w">
        <div class="thanks-wrapper">
            <aside class="inter">
              <div id="thanks-title" class="padding-50 font-30">You're finished!</div>
              <div class="index-instructions">Your highest score was: <span id="player-score-max">5</span> and your total score was: <span id="player-score-sum">0</span>. This translates to a bonus of <span id="bonus-calculation">£0</span>.</div>
              <div class="index-instructions">Please enter your information below.</div><div class="index-instructions">If you have any comments about the task, n3ssiori, or about how you made your decisions, these would be very welcome. Please do not provide any identifiable information in your comments.</div><div class="index-instructions">Click the button to proceed to the final payment page.</div>
              <div id="final-user-input" class="final-user-input">
                <form class="demos">
                  <label for="gender">Gender:</label>
                  <div class="dropdown-wrapper">
                    <select id="gender" name="gender" class="dropdown">
                      <option value="prefer-not-to-say">Prefer not to say</option>
                      <option value="woman">Woman</option>
                      <option value="man">Man</option>
                      <option value="non-binary">Non-binary</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <br><br>
                  <label for="age">Age:</label>
                  <div class="dropdown-wrapper">
                    <select id="age" name="age" class="dropdown"></select>
                  </div>
                </form>
                <div class="comments">
                  <textarea id="comments" name="comments" placeholder="Leave your comments here..."></textarea>
                </div>
              </div>
              <div id="final-payment-button-wrapper">
                <button id="final-payment" class="button enabled">Final payment</button>
              </div>
            </aside>
          </div>
    </div>

    <!-- FINAL -->
    <div id="FINAL" class="w">
        <div class="wrapper">
          <aside class="inter">
            <div class="padding-50 font-30">Thank you!</div>
            <div class="index-instructions">We will redirect you to the Prolific payment page presently. Have a lovely rest of the day.</div>
          </aside>
        </div>
    </div>

    <!-- RESCINDED -->
    <div id="RESCINDED" class="w">
        <div class="wrapper">
          <aside class="inter">
              <div class="padding-50 font-30">Thank you for taking the time to look at the study. We have collected no information about you.</div>
              <div class="index-instructions">We hope you have a lovely rest of the day. Feel free to close this window at any time.</div>
          </aside>
        </div>
    </div>

    <!-- BEFORE -->
    <div id="BEFORE" class="w">
        <div class="wrapper">
          <aside class="inter">
              <div class="padding-50 font-30">Sorry, you've been here before!</div>
              <div class="index-instructions">I'm afraid you can only access the experiment once, even if you didn't complete it.</div>
              <div class="index-instructions">We hope you have a lovely rest of the day. Feel free to close this window at any time.</div>
          </aside>
        </div>
    </div>

    <!-- NO-PID -->
    <div id="NOPID" class="w">
        <div class="wrapper">
          <aside class="inter">
              <div class="padding-50 font-30">Sorry, we don't know who you are!</div>
              <div class="index-instructions">I'm afraid we can't find your prolific ID, which means we won't be able to pay you.</div>
              <div class="index-instructions">We hope you have a lovely rest of the day. Feel free to close this window at any time.</div>
          </aside>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="main.js"></script>
</body>
</html>